# Core RAG Engine - Frontend

Application React/Vite pour le moteur RAG (Retrieval Augmented Generation) multi-verticales.

## ğŸš€ DÃ©marrage rapide

### PrÃ©requis

- Node.js 18+
- npm ou yarn
- Compte Supabase configurÃ©

### Installation

```bash
# Cloner le projet
git clone <repo-url>
cd Frontend

# Installer les dÃ©pendances
npm install

# Configurer les variables d'environnement
cp .env.example .env.local
# Ã‰diter .env.local avec vos clÃ©s Supabase

# Lancer le dÃ©veloppement
npm run dev
```

### Variables d'environnement

```env
# Obligatoires
VITE_SUPABASE_URL=https://votre-projet.supabase.co
VITE_SUPABASE_ANON_KEY=votre_anon_key

# Optionnelles
VITE_N8N_INGEST_WEBHOOK_URL=https://votre-n8n/webhook/ingest
VITE_N8N_INVOICE_WEBHOOK_URL=https://votre-n8n/webhook/invoice
VITE_DEMO_MODE=false
```

## ğŸ“ Structure du projet

```
src/
â”œâ”€â”€ components/          # Composants React
â”‚   â”œâ”€â”€ admin/          # Composants d'administration
â”‚   â”œâ”€â”€ chat/           # Interface de chat RAG
â”‚   â”œâ”€â”€ layout/         # Composants de mise en page (Sidebar, Header)
â”‚   â”œâ”€â”€ ui/             # Composants UI rÃ©utilisables
â”‚   â””â”€â”€ ErrorBoundary.jsx
â”‚
â”œâ”€â”€ config/             # Configuration centralisÃ©e
â”‚   â”œâ”€â”€ index.js        # Export principal
â”‚   â”œâ”€â”€ constants.js    # Constantes globales
â”‚   â”œâ”€â”€ routes.js       # Configuration des routes
â”‚   â”œâ”€â”€ api.js          # Configuration API
â”‚   â””â”€â”€ messages.js     # Messages utilisateur
â”‚
â”œâ”€â”€ contexts/           # Contextes React
â”‚   â”œâ”€â”€ AuthContext.jsx      # Authentification
â”‚   â”œâ”€â”€ ToastContext.jsx     # Notifications toast
â”‚   â””â”€â”€ VerticalContext.jsx  # Gestion des verticales
â”‚
â”œâ”€â”€ hooks/              # Hooks personnalisÃ©s
â”‚   â”œâ”€â”€ useAsync.js          # Ã‰tats asynchrones
â”‚   â”œâ”€â”€ useDebounce.js       # Debounce/Throttle
â”‚   â”œâ”€â”€ useErrorHandler.js   # Gestion des erreurs
â”‚   â”œâ”€â”€ useForm.js           # Gestion de formulaires
â”‚   â”œâ”€â”€ useImpersonation.js  # Impersonation (super_admin)
â”‚   â”œâ”€â”€ useLocalStorage.js   # Persistance localStorage
â”‚   â”œâ”€â”€ useRAG.js            # Chat RAG
â”‚   â””â”€â”€ useToast.js          # Notifications
â”‚
â”œâ”€â”€ services/           # Couche services (API)
â”‚   â”œâ”€â”€ auth.service.js
â”‚   â”œâ”€â”€ profile.service.js
â”‚   â”œâ”€â”€ organization.service.js
â”‚   â”œâ”€â”€ rag.service.js
â”‚   â””â”€â”€ storage.service.js
â”‚
â”œâ”€â”€ utils/              # Utilitaires
â”‚   â”œâ”€â”€ cn.js           # Combinaison de classes CSS
â”‚   â””â”€â”€ errors.js       # Gestion des erreurs
â”‚
â”œâ”€â”€ pages/              # Pages de l'application
â”‚   â”œâ”€â”€ Login.jsx
â”‚   â”œâ”€â”€ Dashboard.jsx
â”‚   â”œâ”€â”€ Admin.jsx
â”‚   â”œâ”€â”€ Settings.jsx
â”‚   â””â”€â”€ Onboarding.jsx
â”‚
â””â”€â”€ lib/                # Configuration externe
    â””â”€â”€ supabaseClient.js
```

## ğŸ§© Composants UI

BibliothÃ¨que de composants rÃ©utilisables dans `src/components/ui/` :

| Composant | Description |
|-----------|-------------|
| `Button` | Bouton avec variantes (primary, secondary, danger, ghost) |
| `Input` | Champ de saisie avec label, erreur, icÃ´nes |
| `Textarea` | Zone de texte multi-lignes |
| `Card` | Carte avec header, content, footer |
| `Modal` | FenÃªtre modale avec overlay |
| `Alert` | Messages d'alerte (success, error, warning, info) |
| `Spinner` | Indicateurs de chargement |
| `Skeleton` | Placeholders de chargement |

### Exemple d'utilisation

```jsx
import { Button, Input, Card, Alert } from '@/components/ui';

function MyComponent() {
  return (
    <Card>
      <Input label="Email" type="email" error={errors.email} />
      <Button variant="primary" loading={isLoading}>
        Envoyer
      </Button>
      <Alert variant="success">OpÃ©ration rÃ©ussie !</Alert>
    </Card>
  );
}
```

## ğŸª Hooks personnalisÃ©s

### useAsync

GÃ¨re les Ã©tats asynchrones (loading, error, data).

```jsx
const { data, loading, error, execute } = useAsync(fetchData);
await execute(params);
```

### useForm

Gestion complÃ¨te de formulaires.

```jsx
const { values, errors, handleChange, handleSubmit } = useForm({
  initialValues: { email: '' },
  validate: (values) => ({ email: !values.email ? 'Requis' : null }),
  onSubmit: async (values) => await saveData(values),
});
```

### useDebounce

Debounce d'une valeur.

```jsx
const debouncedSearch = useDebounce(searchTerm, 300);
```

### useToast (avec ToastProvider)

Notifications toast.

```jsx
const { success, error } = useToast();
success('SauvegardÃ© !');
error('Une erreur est survenue');
```

### useErrorHandler

Gestion centralisÃ©e des erreurs.

```jsx
const { handleError, error } = useErrorHandler();
try {
  await riskyOperation();
} catch (err) {
  handleError(err);
}
```

## ğŸ” Authentification

Le contexte `AuthContext` gÃ¨re :

- Connexion / Inscription
- OAuth Google
- Gestion de session
- Profil utilisateur
- Organisation
- Impersonation (super_admin)

```jsx
const { 
  user, 
  profile, 
  signIn, 
  signOut, 
  isAuthenticated,
  isSuperAdmin 
} = useAuth();
```

## ğŸ¨ Verticales

L'application supporte plusieurs verticales mÃ©tier :

| ID | Nom | Couleur |
|----|-----|---------|
| `audit` | Audit | Indigo |
| `btp` | BTP | Amber |
| `juridique` | Juridique | Green |
| `rh` | RH | Pink |

## ğŸ“œ Scripts disponibles

```bash
npm run dev      # Serveur de dÃ©veloppement
npm run build    # Build de production
npm run preview  # PrÃ©visualiser le build
npm run lint     # Linter ESLint
```

## ğŸ› ï¸ Technologies

- **React 18** - Framework UI
- **Vite** - Build tool
- **Tailwind CSS** - Styling
- **Supabase** - Backend (Auth, Database, Storage, Edge Functions)
- **Lucide React** - IcÃ´nes
- **React Router** - Routing

## ğŸ“ Conventions

### Nommage

- Composants : `PascalCase.jsx`
- Hooks : `useCamelCase.js`
- Services : `camelCase.service.js`
- Utils : `camelCase.js`

### Imports

```jsx
// Composants UI
import { Button, Input } from '@/components/ui';

// Hooks
import { useAsync, useForm } from '@/hooks';

// Services
import { authService, profileService } from '@/services';

// Config
import { APP_NAME, ROUTES } from '@/config';
```

## ğŸ“„ Licence

PropriÃ©taire - Tous droits rÃ©servÃ©s