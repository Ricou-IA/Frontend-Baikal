# Changelog - Refactorisation

## [2.0.0] - 2024-12 - Refactorisation majeure

### âœ¨ NouveautÃ©s

#### Configuration centralisÃ©e (`src/config/`)
- `constants.js` - Constantes globales (APP_NAME, VERTICALS, ROLES)
- `routes.js` - Configuration des routes
- `api.js` - Configuration API et endpoints
- `messages.js` - Messages utilisateur centralisÃ©s

#### Hooks personnalisÃ©s (`src/hooks/`)
- `useAsync` - Gestion des Ã©tats asynchrones
- `useLocalStorage` - Persistance localStorage avec sync
- `useDebounce` / `useThrottle` - ContrÃ´le de frÃ©quence
- `useForm` - Gestion complÃ¨te de formulaires
- `useToast` - Notifications toast
- `useRAG` - Chat RAG
- `useErrorHandler` - Gestion centralisÃ©e des erreurs
- `useImpersonation` - Impersonation super_admin

#### Couche services (`src/services/`)
- `auth.service.js` - Authentification
- `profile.service.js` - Profils utilisateurs
- `organization.service.js` - Organisations et membres
- `rag.service.js` - Chat RAG et conversations
- `storage.service.js` - Gestion des fichiers

#### Composants UI (`src/components/ui/`)
- `Button` - Boutons avec variantes
- `Input` / `Textarea` - Champs de saisie
- `Card` - Cartes avec slots
- `Modal` / `ConfirmModal` - FenÃªtres modales
- `Alert` / `AlertInline` / `AlertBanner` - Alertes
- `Spinner` / `Skeleton` - Chargement

#### Composants Layout (`src/components/layout/`)
- `Sidebar` - Navigation latÃ©rale rÃ©utilisable
- `MobileHeader` - Header mobile

#### Gestion des erreurs (`src/utils/errors.js`)
- Classes d'erreurs typÃ©es (AppError, AuthError, APIError, etc.)
- Mapping des erreurs Supabase
- Handler global

#### Contextes
- `ToastContext` - SystÃ¨me de notifications toast global
- `ErrorBoundary` - Capture des erreurs React

### ğŸ”„ Modifications

#### AuthContext refactorisÃ©
- RÃ©duit de ~400 Ã  ~250 lignes
- Extraction de `useImpersonation`
- Utilisation des services internes
- Interface publique inchangÃ©e

#### Dashboard refactorisÃ©
- RÃ©duit de ~300 Ã  ~200 lignes
- Extraction de `Sidebar` et `MobileHeader`
- SÃ©paration du contenu par onglet (`TabContent`)
- Meilleure organisation du code

### ğŸ—‘ï¸ Suppressions

- `brique6/` - Dossier fusionnÃ© dans le projet principal
- `.env.local2` - Fichier doublon
- `project_code_export.json` - Export temporaire
- `console.log` inutiles supprimÃ©s

### ğŸ“ Structure finale

```
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ admin/          # 6 fichiers
â”‚   â”œâ”€â”€ chat/           # 4 fichiers
â”‚   â”œâ”€â”€ layout/         # 3 fichiers (NEW)
â”‚   â”œâ”€â”€ ui/             # 7 fichiers (NEW)
â”‚   â””â”€â”€ ErrorBoundary.jsx (NEW)
â”œâ”€â”€ config/             # 5 fichiers (NEW)
â”œâ”€â”€ contexts/           # 3 fichiers
â”œâ”€â”€ hooks/              # 9 fichiers (NEW)
â”œâ”€â”€ services/           # 6 fichiers (NEW)
â”œâ”€â”€ utils/              # 3 fichiers (NEW)
â”œâ”€â”€ pages/              # 6 fichiers
â””â”€â”€ lib/                # 1 fichier
```

### ğŸ› ï¸ AmÃ©liorations techniques

- Architecture plus modulaire et maintenable
- RÃ©utilisabilitÃ© accrue des composants
- Gestion d'erreur uniforme
- Documentation JSDoc complÃ¨te
- SÃ©paration des responsabilitÃ©s
- Code plus testable

### ğŸ“ Documentation

- `README.md` - Documentation principale
- `HOOKS.md` - Documentation des hooks
- `SERVICES.md` - Documentation des services
- `COMPONENTS.md` - Documentation des composants UI
- `CHANGELOG.md` - Ce fichier

---

## [1.0.0] - Version initiale

- ImplÃ©mentation initiale du Core RAG Engine
- Authentification Supabase
- Chat RAG multi-verticales
- Upload de documents
- Gestion des organisations
